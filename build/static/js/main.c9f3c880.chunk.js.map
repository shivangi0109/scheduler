{"version":3,"sources":["helpers/selectors.js","reducers/application.js","hooks/useApplicationData.js","hooks/useRealtimeUpdate.js","components/DayListItem.js","components/DayList.js","components/Appointment/Header.js","components/Appointment/Empty.js","components/Appointment/Show.js","components/InterviewerListItem.js","components/InterviewerList.js","components/Button.js","components/Appointment/Form.js","components/Appointment/Status.js","components/Appointment/Confirm.js","components/Appointment/Error.js","components/Appointment/index.js","hooks/useVisualMode.js","components/Application.js","index.js"],"names":["getInterview","state","interview","_objectSpread","interviewer","interviewers","reducer","action","type","day","days","appointments","appointment","id","_defineProperty","getSpotsForDay","length","reduce","count","map","includes","spots","Error","concat","useApplicationData","_useReducer","useReducer","_useReducer2","_slicedToArray","dispatch","useEffect","Promise","all","axios","get","then","_ref","_ref2","data","socket","WebSocket","process","onmessage","event","JSON","parse","close","useRealTimeUpdate","setDay","bookInterview","put","cancelInterview","delete","DayListItem","props","number","dayClass","classnames","selected","React","createElement","className","onClick","name","data-testid","DayList","key","Header","time","Empty","src","alt","onAdd","Show","student","onEdit","onDelete","InterviewerItem","itemClass","setInterviewer","avatar","InterviewerList","InterviewerListItem","value","onChange","Button","buttonClass","danger","confirm","disabled","children","Form","_useState","useState","_useState2","setName","_useState3","_useState4","_useState5","_useState6","error","setError","autoComplete","onSubmit","preventDefault","placeholder","target","onCancel","onSave","Status","message","Confirm","onConfirm","onClose","Appointment","_useVisualMode","initial","history","setHistory","mode","transition","newMode","replace","arguments","undefined","prev","newHistory","_toConsumableArray","pop","back","slice","useVisualMode","save","catch","Application","_useApplicationData","found","find","d","getInterviewersForDay","getAppointmentsForDay","Object","assign","defaults","baseURL","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.c9f3c880.chunk.js","sourcesContent":["export function getAppointmentsForDay(state, day) {\n  const found = state.days.find(d => day === d.name);\n\n  if (state.days.length === 0 || found === undefined) return [];\n\n  return found.appointments.map(id => state.appointments[id]);\n}\n\nexport function getInterviewersForDay(state, day) {\n  const found = state.days.find(d => day === d.name);\n\n  if (state.days.length === 0 || found === undefined) return [];\n\n  return found.interviewers.map(id => state.interviewers[id]);\n}\n\nexport function getInterview(state, interview) {\n  return (\n    interview && {\n      ...interview,\n      interviewer: state.interviewers[interview.interviewer]\n    }\n  );\n}\n","export const SET_DAY = \"SET_DAY\";\nexport const SET_APPLICATION_DATA = \"SET_APPLICATION_DATA\";\nexport const SET_INTERVIEW = \"SET_INTERVIEW\";\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case SET_DAY:\n      return { ...state, day: action.day };\n    case SET_APPLICATION_DATA:\n      return {\n        ...state,\n        days: action.days,\n        appointments: action.appointments,\n        interviewers: action.interviewers\n      };\n    case SET_INTERVIEW: {\n      const appointment = {\n        ...state.appointments[action.id],\n        interview: action.interview && { ...action.interview }\n      };\n\n      const appointments = {\n        ...state.appointments,\n        [action.id]: appointment\n      };\n\n      const getSpotsForDay = day =>\n        day.appointments.length -\n        day.appointments.reduce(\n          (count, id) => (appointments[id].interview ? count + 1 : count),\n          0\n        );\n\n      const days = state.days.map(day => {\n        return day.appointments.includes(action.id)\n          ? {\n              ...day,\n              spots: getSpotsForDay(day)\n            }\n          : day;\n      });\n\n      return {\n        ...state,\n        appointments,\n        days\n      };\n    }\n    default:\n      throw new Error(\n        `Tried to reduce with unsupported action type: ${action.type}`\n      );\n  }\n}\n","import { useReducer, useEffect } from \"react\";\n\nimport axios from \"axios\";\n\nimport reducer, {\n  SET_DAY,\n  SET_APPLICATION_DATA,\n  SET_INTERVIEW\n} from \"reducers/application\";\n\nimport useRealTimeUpdate from \"hooks/useRealtimeUpdate\";\n\nexport default function useApplicationData() {\n  const [state, dispatch] = useReducer(reducer, {\n    day: \"Monday\",\n    days: [],\n    appointments: {},\n    interviewers: {}\n  });\n\n  const setDay = day => dispatch({ type: SET_DAY, day });\n\n  useEffect(() => {\n    Promise.all([\n      axios.get(\"/api/days\"),\n      axios.get(\"/api/appointments\"),\n      axios.get(\"/api/interviewers\")\n    ]).then(\n      ([{ data: days }, { data: appointments }, { data: interviewers }]) =>\n        dispatch({\n          type: SET_APPLICATION_DATA,\n          days,\n          appointments,\n          interviewers\n        })\n    );\n  }, []);\n\n  useRealTimeUpdate(dispatch);\n\n  function bookInterview(id, interview) {\n    return axios.put(`/api/appointments/${id}`, { interview }).then(() => {\n      dispatch({\n        type: SET_INTERVIEW,\n        id,\n        interview\n      });\n    });\n  }\n\n  function cancelInterview(id) {\n    return axios.delete(`/api/appointments/${id}`).then(() => {\n      dispatch({\n        type: SET_INTERVIEW,\n        id,\n        interview: null\n      });\n    });\n  }\n\n  return {\n    state,\n    setDay,\n    bookInterview,\n    cancelInterview\n  };\n}\n","import { useEffect } from \"react\";\nimport { SET_INTERVIEW } from \"reducers/application\";\n\nexport default function useRealtimeUpdate(dispatch) {\n  useEffect(() => {\n    const socket = new WebSocket(process.env.REACT_APP_WEBSOCKET_URL);\n\n    socket.onmessage = event => {\n      const data = JSON.parse(event.data);\n\n      if (typeof data === \"object\" && data.type === SET_INTERVIEW) {\n        dispatch(data);\n      }\n    };\n\n    return () => {\n      socket.close();\n    };\n  }, [dispatch]);\n}\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"components/DayListItem.scss\";\n\nexport function formatSpots(number) {\n  if (number === 0) return \"no spots remaining\";\n  if (number === 1) return \"1 spot remaining\";\n\n  return `${number} spots remaining`;\n}\n\nexport default function DayListItem(props) {\n  const dayClass = classnames(\"day-list__item\", {\n    \"day-list__item--selected\": props.selected,\n    \"day-list__item--full\": props.spots === 0\n  });\n\n  return (\n    <li\n      className={dayClass}\n      onClick={() => props.setDay(props.name)}\n      data-testid=\"day\"\n    >\n      <h2 className=\"text--regular\">{props.name}</h2>\n      <h3 className=\"text--light\">{formatSpots(props.spots)}</h3>\n    </li>\n  );\n}\n","import React from \"react\";\n\nimport DayListItem from \"components/DayListItem\";\n\nexport default function DayList(props) {\n  const days = props.days.map(day => {\n    return (\n      <DayListItem\n        key={day.id}\n        name={day.name}\n        spots={day.spots}\n        selected={day.name === props.day}\n        setDay={props.setDay}\n      />\n    );\n  });\n\n  return <ul>{days}</ul>;\n}\n","import React from \"react\";\n\nexport default function Header(props) {\n  return (\n    <header className=\"appointment__time\">\n      <h4 className=\"text--semi-bold\">{props.time}</h4>\n      <hr className=\"appointment__separator\" />\n    </header>\n  );\n}\n","import React from \"react\";\n\nexport default function Empty(props) {\n  return (\n    <main className=\"appointment__add\">\n      <img\n        className=\"appointment__add-button\"\n        src=\"images/add.png\"\n        alt=\"Add\"\n        onClick={props.onAdd}\n      />\n    </main>\n  );\n}\n","import React from \"react\";\n\nexport default function Show(props) {\n  return (\n    <main className=\"appointment__card appointment__card--show\">\n      <section className=\"appointment__card-left\">\n        <h2 className=\"text--regular\">{props.student}</h2>\n        <section className=\"interviewer\">\n          <h4 className=\"text--light\">Interviewer</h4>\n          <h3 className=\"text--regular\">\n            {props.interviewer && props.interviewer.name}\n          </h3>\n        </section>\n      </section>\n      <section className=\"appointment__card-right\">\n        <section className=\"appointment__actions\">\n          <img\n            className=\"appointment__actions-button\"\n            src=\"images/edit.png\"\n            alt=\"Edit\"\n            onClick={props.onEdit}\n          />\n          <img\n            className=\"appointment__actions-button\"\n            src=\"images/trash.png\"\n            alt=\"Delete\"\n            onClick={props.onDelete}\n          />\n        </section>\n      </section>\n    </main>\n  );\n}\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"components/InterviewerListItem.scss\";\n\nexport default function InterviewerItem(props) {\n  const itemClass = classnames(\"interviewers__item\", {\n    \"interviewers__item--selected\": props.selected\n  });\n\n  return (\n    <li className={itemClass} onClick={props.setInterviewer}>\n      <img\n        className=\"interviewers__item-image\"\n        src={props.avatar}\n        alt={props.name}\n      />\n      {props.selected && props.name}\n    </li>\n  );\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport \"components/InterviewerList.scss\";\n\nimport InterviewerListItem from \"components/InterviewerListItem\";\n\nfunction InterviewerList(props) {\n  const interviewers = props.interviewers.map(interviewer => {\n    return (\n      <InterviewerListItem\n        key={interviewer.id}\n        id={interviewer.id}\n        name={interviewer.name}\n        avatar={interviewer.avatar}\n        selected={interviewer.id === props.value}\n        setInterviewer={event => props.onChange(interviewer.id)}\n      />\n    );\n  });\n\n  return (\n    <section className=\"interviewers\">\n      <h4 className=\"interviewers__header text--light\">Interviewer</h4>\n      <ul className=\"interviewers__list\">{interviewers}</ul>\n    </section>\n  );\n}\n\nInterviewerList.propTypes = {\n  value: PropTypes.number,\n  onChange: PropTypes.func.isRequired,\n  interviewers: PropTypes.array.isRequired\n};\n\nexport default InterviewerList;\n","import React from \"react\";\n\nimport classnames from \"classnames\";\n\nimport \"components/Button.scss\";\n\nexport default function Button(props) {\n  const buttonClass = classnames(\"button\", {\n    \"button--danger\": props.danger,\n    \"button--confirm\": props.confirm\n  });\n\n  return (\n    <button\n      className={buttonClass}\n      onClick={props.onClick}\n      disabled={props.disabled}\n    >\n      {props.children}\n    </button>\n  );\n}\n","import React, { useState } from \"react\";\n\nimport InterviewerList from \"components/InterviewerList\";\nimport Button from \"components/Button\";\n\nexport default function Form(props) {\n  const [name, setName] = useState(props.name || \"\");\n  const [interviewer, setInterviewer] = useState(props.interviewer || null);\n  const [error, setError] = useState(\"\");\n\n  function reset() {\n    setName(\"\");\n    setError(\"\");\n    setInterviewer(null);\n  }\n\n  function cancel() {\n    reset();\n    props.onCancel();\n  }\n\n  function validate() {\n    if (name === \"\") {\n      setError(\"Student name cannot be blank\");\n      return;\n    }\n\n    if (interviewer === null) {\n      setError(\"Please select an interviewer\");\n      return;\n    }\n\n    setError(\"\");\n    props.onSave(name, interviewer);\n  }\n\n  return (\n    <main className=\"appointment__card appointment__card--create\">\n      <section className=\"appointment__card-left\">\n        <form autoComplete=\"off\" onSubmit={event => event.preventDefault()}>\n          <input\n            className=\"appointment__create-input text--semi-bold\"\n            name=\"name\"\n            type=\"text\"\n            placeholder=\"Enter Student Name\"\n            value={name}\n            onChange={event => {\n              setName(event.target.value);\n            }}\n            data-testid=\"student-name-input\"\n          />\n        </form>\n        <section className=\"appointment__validation\">{error}</section>\n        <InterviewerList\n          interviewers={props.interviewers}\n          value={interviewer}\n          onChange={setInterviewer}\n        />\n      </section>\n      <section className=\"appointment__card-right\">\n        <section className=\"appointment__actions\">\n          <Button danger onClick={cancel}>\n            Cancel\n          </Button>\n          <Button confirm onClick={validate}>\n            Save\n          </Button>\n        </section>\n      </section>\n    </main>\n  );\n}\n","import React from \"react\";\n\nexport default function Status(props) {\n  return (\n    <main className=\"appointment__card appointment__card--status\">\n      <img\n        className=\"appointment__status-image\"\n        src=\"images/status.png\"\n        alt=\"Loading\"\n      />\n      <h1 className=\"text--semi-bold\">{props.message}</h1>\n    </main>\n  );\n}\n","import React from \"react\";\n\nimport Button from \"components/Button\";\n\nexport default function Confirm(props) {\n  return (\n    <main className=\"appointment__card appointment__card--confirm\">\n      <h1 className=\"text--semi-bold\">{props.message}</h1>\n      <section className=\"appointment__actions\">\n        <Button danger onClick={props.onCancel}>\n          Cancel\n        </Button>\n        <Button danger onClick={props.onConfirm}>\n          Confirm\n        </Button>\n      </section>\n    </main>\n  );\n}\n","import React from \"react\";\n\nexport default function Error(props) {\n  return (\n    <main className=\"appointment__card appointment__card--error\">\n      <section className=\"appointment__error-message\">\n        <h1 className=\"text--semi-bold\">Error</h1>\n        <h3 className=\"text--light\">{props.message}</h3>\n      </section>\n      <img\n        className=\"appointment__error-close\"\n        src=\"images/close.png\"\n        alt=\"Close\"\n        onClick={props.onClose}\n      />\n    </main>\n  );\n}\n","import React from \"react\";\n\nimport \"components/Appointment/styles.scss\";\n\nimport Header from \"components/Appointment/Header\";\n\nimport Empty from \"components/Appointment/Empty\";\nimport Show from \"components/Appointment/Show\";\nimport Form from \"components/Appointment/Form\";\nimport Status from \"components/Appointment/Status\";\nimport Confirm from \"./Confirm\";\nimport Error from \"./Error\";\nimport useVisualMode from \"hooks/useVisualMode\";\n\nconst EMPTY = \"EMPTY\";\nconst SHOW = \"SHOW\";\nconst CREATE = \"CREATE\";\nconst EDIT = \"EDIT\";\nconst SAVING = \"SAVING\";\nconst DELETING = \"DELETING\";\nconst CONFIRM = \"CONFIRM\";\nconst ERROR_SAVE = \"ERROR_SAVE\";\nconst ERROR_DELETE = \"ERROR_DELETE\";\n\nexport default function Appointment(props) {\n\n  const { mode, transition, back } = useVisualMode(\n    props.interview ? SHOW : EMPTY\n  );\n\n  function save(name, interviewer) {\n    const interview = {\n      student: name,\n      interviewer\n    };\n  \n    transition(SAVING);\n  \n    props\n      .bookInterview(props.id, interview)\n      .then(() => transition(SHOW))\n      .catch(error => transition(ERROR_SAVE, true));\n  }\n  \n  function destroy() {\n    transition(DELETING, true);\n    props\n      .cancelInterview(props.id)\n      .then(() => transition(EMPTY))\n      .catch(error => transition(ERROR_DELETE, true));\n  }\n\n  return (\n    <article className=\"appointment\" data-testid=\"appointment\">\n      <Header time={props.time} />\n      {mode === SHOW && (\n        <Show\n          student={props.interview.student}\n          interviewer={props.interview.interviewer}\n          onDelete={() => transition(CONFIRM)}\n          onEdit={() => transition(EDIT)}\n        />\n      )}\n      {mode === EMPTY && <Empty onAdd={() => transition(CREATE)} />}\n      {mode === CREATE && (\n        <Form interviewers={props.interviewers} onCancel={() => back()} onSave={save} />\n      )}\n      {mode === EDIT && (\n        <Form\n          name={props.interview.student}\n          interviewer={props.interview.interviewer ? props.interview.interviewer.id : null}\n          interviewers={props.interviewers}\n          onCancel={back}\n          onSave={save}\n        />\n      )}\n      {mode === SAVING && <Status message=\"Saving\" />}\n      {mode === DELETING && <Status message=\"Deleting\" />}\n      {mode === CONFIRM && (\n        <Confirm\n          message=\"Are you sure you would like to delete?\"\n          onCancel={back}\n          onConfirm={destroy}\n        />\n      )}\n      {mode === ERROR_SAVE && (\n        <Error message=\"Could not book appointment.\" onClose={back} />\n      )}\n      {mode === ERROR_DELETE && (\n        <Error message=\"Could not cancel appointment.\" onClose={back} />\n      )}\n    </article>\n  );\n}\n","import { useState } from \"react\";\n\nexport default function useVisualMode(initial) {\n  const [mode, setMode] = useState(initial);\n  // We will need to keep track of the history of the modes, so we can go backwards to a previous mode. We can store this history as a stateful array called history in our Hook.\n  const [history, setHistory] = useState([initial]);\n\n  // Create the 'transition' function to update the 'mode' state\n  const transition = (newMode, replace = false) => {\n    setHistory((prev) => {\n      if (replace) {\n        // Replace the current mode in history with the new mode\n        const newHistory = [...prev];\n        newHistory.pop(); // Remove the current mode\n        return [...newHistory, newMode];\n      } else {\n        return [...prev, newMode];\n      }\n    });\n  };\n\n  const back = () => {\n    if (history.length > 1) {\n      setHistory(prev => [...prev.slice(0, prev.length - 1)]);\n    }\n  };\n\n  return {\n    mode: history[history.length -1],\n    transition,\n    back\n  };\n}\n\n// As seen here, the `useVisualMode` function can take an initial argument to set the mode state. We then return an object `{ mode }`, which can also be written as `{ mode: mode }`. This lets our tests (and components) access the current value of the mode from the hook.","import React from \"react\";\n\nimport {\n  getAppointmentsForDay,\n  getInterviewersForDay,\n  getInterview\n} from \"helpers/selectors\";\n\nimport useApplicationData from \"hooks/useApplicationData\";\n\nimport \"components/Application.scss\";\n\nimport DayList from \"components/DayList\";\nimport Appointment from \"components/Appointment\";\n\nexport default function Application(props) {\n  const {\n    state,\n    setDay,\n    bookInterview,\n    cancelInterview\n  } = useApplicationData();\n\n  const interviewers = getInterviewersForDay(state, state.day);\n\n  const appointments = getAppointmentsForDay(state, state.day).map(\n    appointment => {\n      return (\n        <Appointment\n          key={appointment.id}\n          {...appointment}\n          interview={getInterview(state, appointment.interview)}\n          interviewers={interviewers}\n          bookInterview={bookInterview}\n          cancelInterview={cancelInterview}\n        />\n      );\n    }\n  );\n\n  return (\n    <main className=\"layout\">\n      <section className=\"sidebar\">\n        <img\n          className=\"sidebar--centered\"\n          src=\"images/logo.png\"\n          alt=\"Interview Scheduler\"\n        />\n        <hr className=\"sidebar__separator sidebar--centered\" />\n        <nav className=\"sidebar__menu\">\n          <DayList days={state.days} day={state.day} setDay={setDay} />\n        </nav>\n        <img\n          className=\"sidebar__lhl sidebar--centered\"\n          src=\"images/lhl.png\"\n          alt=\"Lighthouse Labs\"\n        />\n      </section>\n      <section className=\"schedule\">\n        {appointments}\n        <Appointment key=\"last\" time=\"5pm\" />\n      </section>\n    </main>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"index.scss\";\n\nimport Application from \"components/Application\";\n\nimport axios from \"axios\";\n\nif (process.env.REACT_APP_API_BASE_URL) {\n  axios.defaults.baseURL = process.env.REACT_APP_API_BASE_URL;\n}\n\nReactDOM.render(<Application />, document.getElementById(\"root\"));\n"],"sourceRoot":""}